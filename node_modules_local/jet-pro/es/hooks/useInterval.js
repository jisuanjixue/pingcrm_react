import { useRef } from 'react';
import useMountUnmount from './useMountUnmount';

/**
 * 间隔执行
 * @param handler 执行函数
 * @param ms 间隔毫秒
 */
export default (function (handler) {
  var ms = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2000;
  var refInterval = useRef();
  useMountUnmount({
    mount: function mount() {
      refInterval.current = setInterval(function () {
        return handler();
      }, ms);
    },
    unmount: function unmount() {
      if (refInterval.current) clearInterval(refInterval.current);
    },
  });
});
